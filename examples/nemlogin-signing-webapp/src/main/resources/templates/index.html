<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head th:include="fragments/layout :: headFragment"></head>
  <body>
  <!--/*@thymesVar id="documents" type="java.util.List<dk.gov.nemlogin.signing.model.SignersDocument>"*/-->
  <!--/*@thymesVar id="deleteEnabled" type="boolean"*/-->
    <div>
      <div class="container page-layout">
        <div th:replace="fragments/layout :: headerFragment"></div>

        <div class="page-content">

          <h2 class="mb-3" th:text="#{index.title}"></h2>

          <table class="table table-striped table-responsive-md">
            <thead>
            <tr>
              <th th:text="#{index.documents.name}"></th>
              <th th:text="#{index.documents.download}"></th>
              <th th:text="#{index.documents.delete}" th:if="${deleteEnabled}"></th>
              <th class="text-center" th:text="#{index.documents.sign_as}"></th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="doc,iter : ${documents}">
              <td>
                <span th:text="${doc.name}"></span>
                <span th:if="${doc.format} == ${T(dk.gov.nemlogin.signing.format.DocumentFormat).XML}">
                  + xsl
                </span>
                <span th:if="${doc.properties} != null">
                  + properties
                </span>
              </td>
              <td>
                <a th:href="@{|/download/${doc.name}|}" class="btn btn-secondary" th:id="'download-' + ${iter.index}">
                  <i class="fas fa-file-download"></i>
                </a>
              </td>
              <td th:if="${deleteEnabled}">
                <a th:href="@{|/delete/${doc.name}|}" class="btn btn-secondary" th:id="'delete-' + ${iter.index}">
                  <i class="fas fa-trash"></i>
                </a>
              </td>
              <td class="text-center">
                <a th:href="@{|/sign/pdf/${doc.name}?correlationId=${correlationId}|}" class="btn btn-secondary mr-1"
                   th:id="'pdf-' + ${iter.index}">
                  <i class="fas fa-file-signature"></i>
                  <span th:text="#{index.documents.sign_as.pdf}"></span>
                </a>
                <a th:href="@{|/sign/xml/${doc.name}?correlationId=${correlationId}|}" class="btn btn-secondary"
                   th:id="'xml-' + ${iter.index}">
                  <i class="fas fa-file-signature"></i>
                  <span th:text="#{index.documents.sign_as.xml}"></span>
                </a>
              </td>
            </tr>
            </tbody>
          </table>


          <form action="/upload" method="post" enctype="multipart/form-data" class="upload-sd-form">
            <span th:text="#{index.documents.upload_files}" class="mr-5 nyrup-it"></span>
            <input type="file" name="files" id="choose-files" accept=".pdf, .xml, .html, .txt, .xsl, .properties, .otf, .ttf" multiple
                  class="pull-right">
            <button type="submit" value="Upload Files" name="submit" class="btn btn-sm btn-outline-secondary ml-5"
                    id="upload-files">
              <i class="fas fa-upload"></i>
              <span th:text="#{index.documents.upload}"></span>
            </button>
            <a th:if="${deleteEnabled}" class="btn btn-sm btn-outline-secondary ml-2" href="/reset-documents"
               id="reset-documents">
              <i class="fas fa-copy"></i>
              <span th:text="#{index.documents.reset}"></span>
            </a>
          </form>

        </div>

        <div th:replace="fragments/layout :: footerFragment"></div>
      </div>

    </div>
  </body>
</html>
